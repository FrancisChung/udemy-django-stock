{% extends 'base.html' %}
{% block content %}
    <h2>Add Stock</h2>

    <br/>

    <form action="{% url 'add_stock' %}" class="d-flex" role="search" method="POST">
      {% csrf_token  %}
      <input class="form-control me-2" type="search" placeholder="Add to Portfolio" aria-label="Search" name="ticker">
      <button class="btn btn-outline-secondary" type="submit">Add Stock</button>
    </form>

    <br/>

    {% if ticker %}
        {%  if "Error" in ticker %}
            There was a problem with the ticker symbol
        {%  else %}
            <br />
            <br />
            {% for stock in ticker %}
                {{ stock }}
                <br />
                <br />
            {%  endfor %}
        {% endif %}
    {% endif %}

    {% if db %}
        {%  if "Error" in ticker %}
            There was a problem with the ticker symbol
        {%  else %}
            <table class="table table-striped table-hover">
              <thead>
                <tr>
                  <th scope="col">Id</th>
                  <th scope="col">Ticker</th>
                  <th scope="col">Date</th>
                  <th scope="col">Opening Price</th>
                  <th scope="col">Closing Price</th>
                </tr>
              </thead>
              <tbody>
                {% for item in db %}
                    <tr>
                        <th scope="row"><a href="{% url 'delete' item.id %}">Delete Stock {{ item.id }}</a></th>
                        <td>{{item.ticker }}</td>
                        <td>{{item.date}}</td>
                        <td>{{item.opening_price }}</td>
                        <td>{{item.closing_price }}</td>
                    <tr>
                {%  endfor %}
              </tbody>
            </table>
            <br />
            <br />
            {% for item in db %}
                Id : <a href="{% url 'delete' item.id %}">Delete Stock {{ item.id }}</a><br />
                Ticker: {{ item.ticker }}<br/>
                Date: {{item.date}}<br />
                Opening Price: {{ item.opem }}<br />
                Closing Price: {{ item.close }}<br />
                <br />
                <br />
            {%  endfor %}
        {% endif %}
    {% endif %}
    <br />
{% endblock %}
